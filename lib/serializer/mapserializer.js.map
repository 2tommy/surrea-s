{"version":3,"file":"mapserializer.js","sourceRoot":"","sources":["../../src/serializer/mapserializer.ts"],"names":[],"mappings":";;AAMA;IACC,YAAoB,GAAa,EAAU,wBAAwB,IAAI;QAAnD,QAAG,GAAH,GAAG,CAAU;QAAU,0BAAqB,GAArB,qBAAqB,CAAO;IAAI,CAAC;IAErE,SAAS,CAAC,QAAa;QAC7B,EAAE,CAAC,CAAC,CAAC,QAAQ,CAAC;YACb,MAAM,IAAI,KAAK,CAAC,oCAAoC,CAAC,CAAC;QAEvD,IAAI,EAAE,GAAG,EAAE,qBAAqB,EAAE,GAAG,IAAI,CAAC;QAC1C,IAAI,IAAI,GAAQ,EAAE,CAAC;QAEnB,GAAG,CAAC,CAAC,IAAI,MAAM,IAAI,GAAG,CAAC,CAAC,CAAC;YAIxB,IAAI,IAAI,GAAG,MAAM,CAAC;YAElB,EAAE,CAAC,CAAC,qBAAqB,CAAC,CAAC,CAAC;gBAC3B,IAAI,GAAG,GAAG,CAAC,MAAM,CAAC,CAAC;gBAEnB,EAAE,CAAC,CAAC,CAAC,CAAC,IAAI,IAAI,OAAM,CAAC,IAAI,CAAC,KAAK,QAAQ,CAAC,CAAC;oBACxC,MAAM,IAAI,KAAK,CAAC,0CAA2C,IAAK,GAAG,CAAC,CAAC;YACvE,CAAC;YAED,IAAI,GAAG,GAAG,QAAQ,CAAC,MAAM,CAAC,CAAC;YAE3B,EAAE,CAAC,CAAC,OAAM,CAAC,GAAG,CAAC,KAAK,WAAW,CAAC;gBAC/B,IAAI,CAAC,IAAI,CAAC,GAAG,GAAG,CAAC;QACnB,CAAC;QAED,MAAM,CAAC,IAAI,CAAC;IACb,CAAC;IAEM,WAAW,CAAC,MAAW,EAAE,QAAa;QAC5C,EAAE,CAAC,CAAC,CAAC,MAAM,CAAC;YACX,MAAM,IAAI,KAAK,CAAC,2BAA2B,CAAC,CAAC;QAE9C,EAAE,CAAC,CAAC,CAAC,QAAQ,CAAC;YACb,MAAM,IAAI,KAAK,CAAC,oCAAoC,CAAC,CAAC;QAEvD,IAAI,EAAE,GAAG,EAAE,qBAAqB,EAAE,GAAG,IAAI,CAAC;QAE1C,GAAG,CAAC,CAAC,IAAI,MAAM,IAAI,GAAG,CAAC,CAAC,CAAC;YACxB,IAAI,IAAI,GAAG,MAAM,CAAC;YAElB,EAAE,CAAC,CAAC,qBAAqB,CAAC,CAAC,CAAC;gBAC3B,IAAI,GAAG,GAAG,CAAC,MAAM,CAAC,CAAC;gBAEnB,EAAE,CAAC,CAAC,CAAC,CAAC,IAAI,IAAI,OAAM,CAAC,IAAI,CAAC,KAAK,QAAQ,CAAC,CAAC;oBACxC,MAAM,IAAI,KAAK,CAAC,uCAAuC,CAAC,CAAC;YAC3D,CAAC;YAED,IAAI,GAAG,GAAG,MAAM,CAAC,IAAI,CAAC,CAAC;YAEvB,EAAE,CAAC,CAAC,OAAM,CAAC,GAAG,CAAC,KAAK,WAAW,CAAC;gBAC/B,QAAQ,CAAC,MAAM,CAAC,GAAG,GAAG,CAAC;QACzB,CAAC;IACF,CAAC;CACD;AAzDD,sCAyDC","sourcesContent":["import { ISerializer } from './ISerializer';\n\nexport type FieldMap = {\n\t[key: string]: string;\n}\n\nexport class MapSerializer implements ISerializer<any, any> {\n\tconstructor(private map: FieldMap, private useMappedPropertyName = true) { }\n\n\tpublic serialize(instance: any): any {\n\t\tif (!instance)\n\t\t\tthrow new Error('No serialization instance provided');\n\n\t\tlet { map, useMappedPropertyName } = this;\n\t\tlet json: any = {};\n\n\t\tfor (let srcKey in map) {\n\t\t\t// if (!instance.hasOwnProperty(srcKey))\n\t\t\t// \tthrow new Error(`Invalid instance property name \"${ srcKey }\"`);\n\n\t\t\tlet prop = srcKey;\n\n\t\t\tif (useMappedPropertyName) {\n\t\t\t\tprop = map[srcKey];\n\n\t\t\t\tif (!(prop && typeof(prop) === 'string'))\n\t\t\t\t\tthrow new Error(`Invalid map destination property name \"${ prop }\"`);\n\t\t\t}\n\n\t\t\tlet val = instance[srcKey];\n\n\t\t\tif (typeof(val) !== 'undefined')\n\t\t\t\tjson[prop] = val;\n\t\t}\n\n\t\treturn json;\n\t}\n\n\tpublic deserialize(source: any, instance: any) {\n\t\tif (!source)\n\t\t\tthrow new Error('No source object provided');\n\n\t\tif (!instance)\n\t\t\tthrow new Error('No serialization instance provided');\n\n\t\tlet { map, useMappedPropertyName } = this;\n\n\t\tfor (let srcKey in map) {\n\t\t\tlet prop = srcKey;\n\n\t\t\tif (useMappedPropertyName) {\n\t\t\t\tprop = map[srcKey];\n\n\t\t\t\tif (!(prop && typeof(prop) === 'string'))\n\t\t\t\t\tthrow new Error('Invalid map destination property name');\n\t\t\t}\n\n\t\t\tlet val = source[prop];\n\n\t\t\tif (typeof(val) !== 'undefined')\n\t\t\t\tinstance[srcKey] = val;\n\t\t}\n\t}\n}"]}